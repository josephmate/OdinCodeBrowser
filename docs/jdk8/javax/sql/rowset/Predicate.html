<html>
    <head>
        <link rel="stylesheet" type="text/css" href="/css/styles.css"/>
    </head>
<body>
<pre class="code">
/*
 * Copyright (c) 2003, 2013, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package javax.sql.rowset;

import javax.sql.*;
import java.sql.*;

/**
 * The standard interface that provides the framework for all
 * &lt;code&gt;FilteredRowSet&lt;/code&gt; objects to describe their filters.
 *
 * &lt;h3&gt;1.0 Background&lt;/h3&gt;
 * The &lt;code&gt;Predicate&lt;/code&gt; interface is a standard interface that
 * applications can implement to define the filter they wish to apply to a
 * a &lt;code&gt;FilteredRowSet&lt;/code&gt; object. A &lt;code&gt;FilteredRowSet&lt;/code&gt;
 * object consumes implementations of this interface and enforces the
 * constraints defined in the implementation of the method &lt;code&gt;evaluate&lt;/code&gt;.
 * A &lt;code&gt;FilteredRowSet&lt;/code&gt; object enforces the filter constraints in a
 * bi-directional manner: It outputs only rows that are within
 * the constraints of the filter; and conversely, it inserts, modifies, or updates
 * only rows that are within the constraints of the filter.
 *
 * &lt;h3&gt;2.0 Implementation Guidelines&lt;/h3&gt;
 * In order to supply a predicate for the &lt;code&gt;FilteredRowSet&lt;/code&gt;.
 * this interface must be implemented.  At this time, the JDBC RowSet
 * Implementations (JSR-114) does not specify any standard filters definitions.
 * By specifying a standard means and mechanism for a range of filters to be
 * defined and deployed with both the reference and vendor implementations
 * of the &lt;code&gt;FilteredRowSet&lt;/code&gt; interface, this allows for a flexible
 * and application motivated implementations of &lt;code&gt;Predicate&lt;/code&gt; to emerge.
 * &lt;p&gt;
 * A sample implementation would look something like this:
 * &lt;pre&gt;{@code
 *    public class Range implements Predicate {
 *
 *       private int[] lo;
 *       private int[] hi;
 *       private int[] idx;
 *
 *       public Range(int[] lo, int[] hi, int[] idx) {
 *          this.lo = lo;
 *          this.hi = hi;
 *          this.idx = idx;
 *       }
 *
 *      public boolean evaluate(RowSet rs) {
 *
 *          // Check the present row determine if it lies
 *          // within the filtering criteria.
 *
 *          for (int i = 0; i &lt; idx.length; i++) {
 *             int value;
 *             try {
 *                 value = (Integer) rs.getObject(idx[i]);
 *             } catch (SQLException ex) {
 *                 Logger.getLogger(Range.class.getName()).log(Level.SEVERE, null, ex);
 *                 return false;
 *             }
 *
 *             if (value &lt; lo[i] &amp;&amp; value &gt; hi[i]) {
 *                 // outside of filter constraints
 *                 return false;
 *             }
 *         }
 *         // Within filter constraints
 *        return true;
 *      }
 *   }
 * }&lt;/pre&gt;
 * &lt;P&gt;
 * The example above implements a simple range predicate. Note, that
 * implementations should but are not required to provide &lt;code&gt;String&lt;/code&gt;
 * and integer index based constructors to provide for JDBC RowSet Implementation
 * applications that use both column identification conventions.
 *
 * @author Jonathan Bruce, Amit Handa
 *
 */

 // &lt;h3&gt;3.0 FilteredRowSet Internals&lt;/h3&gt;
 // internalNext, Frist, Last. Discuss guidelines on how to approach this
 // and cite examples in reference implementations.
public interface Predicate {
    /**
     * This method is typically called a &lt;code&gt;FilteredRowSet&lt;/code&gt; object
     * internal methods (not public) that control the &lt;code&gt;RowSet&lt;/code&gt; object's
     * cursor moving  from row to the next. In addition, if this internal method
     * moves the cursor onto a row that has been deleted, the internal method will
     * continue to ove the cursor until a valid row is found.
     * @param rs The {@code RowSet} to be evaluated
     * @return &lt;code&gt;true&lt;/code&gt; if there are more rows in the filter;
     *     &lt;code&gt;false&lt;/code&gt; otherwise
     */
    public boolean evaluate(RowSet rs);


    /**
     * This method is called by a &lt;code&gt;FilteredRowSet&lt;/code&gt; object
     * to check whether the value lies between the filtering criterion (or criteria
     * if multiple constraints exist) set using the &lt;code&gt;setFilter()&lt;/code&gt; method.
     * &lt;P&gt;
     * The &lt;code&gt;FilteredRowSet&lt;/code&gt; object will use this method internally
     * while inserting new rows to a &lt;code&gt;FilteredRowSet&lt;/code&gt; instance.
     *
     * @param value An &lt;code&gt;Object&lt;/code&gt; value which needs to be checked,
     *        whether it can be part of this &lt;code&gt;FilterRowSet&lt;/code&gt; object.
     * @param column a &lt;code&gt;int&lt;/code&gt; object that must match the
     *        SQL index of a column in this &lt;code&gt;RowSet&lt;/code&gt; object. This must
     *        have been passed to &lt;code&gt;Predicate&lt;/code&gt; as one of the columns
     *        for filtering while initializing a &lt;code&gt;Predicate&lt;/code&gt;
     * @return &lt;code&gt;true&lt;/code&gt; if row value lies within the filter;
     *     &lt;code&gt;false&lt;/code&gt; otherwise
     * @throws SQLException if the column is not part of filtering criteria
     */
    public boolean evaluate(Object value, int column) throws SQLException;

    /**
     * This method is called by the &lt;code&gt;FilteredRowSet&lt;/code&gt; object
     * to check whether the value lies between the filtering criteria set
     * using the setFilter method.
     * &lt;P&gt;
     * The &lt;code&gt;FilteredRowSet&lt;/code&gt; object will use this method internally
     * while inserting new rows to a &lt;code&gt;FilteredRowSet&lt;/code&gt; instance.
     *
     * @param value An &lt;code&gt;Object&lt;/code&gt; value which needs to be checked,
     * whether it can be part of this &lt;code&gt;FilterRowSet&lt;/code&gt;.
     *
     * @param columnName a &lt;code&gt;String&lt;/code&gt; object that must match the
     *        SQL name of a column in this &lt;code&gt;RowSet&lt;/code&gt;, ignoring case. This must
     *        have been passed to &lt;code&gt;Predicate&lt;/code&gt; as one of the columns for filtering
     *        while initializing a &lt;code&gt;Predicate&lt;/code&gt;
     *
     * @return &lt;code&gt;true&lt;/code&gt; if value lies within the filter; &lt;code&gt;false&lt;/code&gt; otherwise
     *
     * @throws SQLException if the column is not part of filtering criteria
     */
    public boolean evaluate(Object value, String columnName) throws SQLException;

}
</pre>
</body>
</html>

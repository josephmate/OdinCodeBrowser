<html>
    <head>
        <link rel="stylesheet" type="text/css" href="/css/styles.css"/>
    </head>
<body>
<pre class="code">
/*
 * Copyright (c) 2003, 2013, Oracle and/or its affiliates. All rights reserved.
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
 *
 * This code is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License version 2 only, as
 * published by the Free Software Foundation.  Oracle designates this
 * particular file as subject to the &quot;Classpath&quot; exception as provided
 * by Oracle in the LICENSE file that accompanied this code.
 *
 * This code is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 * version 2 for more details (a copy is included in the LICENSE file that
 * accompanied this code).
 *
 * You should have received a copy of the GNU General Public License version
 * 2 along with this work; if not, write to the Free Software Foundation,
 * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 *
 * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 * or visit www.oracle.com if you need additional information or have any
 * questions.
 */

package javax.sql.rowset.serial;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.sql.*;
import java.util.Map;
import java.util.Vector;

/**
 * The output stream for writing the attributes of a
 * custom-mapped user-defined type (UDT) back to the database.
 * The driver uses this interface internally, and its
 * methods are never directly invoked by an application programmer.
 * &lt;p&gt;
 * When an application calls the
 * method &lt;code&gt;PreparedStatement.setObject&lt;/code&gt;, the driver
 * checks to see whether the value to be written is a UDT with
 * a custom mapping.  If it is, there will be an entry in a
 * type map containing the &lt;code&gt;Class&lt;/code&gt; object for the
 * class that implements &lt;code&gt;SQLData&lt;/code&gt; for this UDT.
 * If the value to be written is an instance of &lt;code&gt;SQLData&lt;/code&gt;,
 * the driver will create an instance of &lt;code&gt;SQLOutputImpl&lt;/code&gt;
 * and pass it to the method &lt;code&gt;SQLData.writeSQL&lt;/code&gt;.
 * The method &lt;code&gt;writeSQL&lt;/code&gt; in turn calls the
 * appropriate &lt;code&gt;SQLOutputImpl.writeXXX&lt;/code&gt; methods
 * to write data from the &lt;code&gt;SQLData&lt;/code&gt; object to
 * the &lt;code&gt;SQLOutputImpl&lt;/code&gt; output stream as the
 * representation of an SQL user-defined type.
 */
public class SQLOutputImpl implements SQLOutput {

    /**
     * A reference to an existing vector that
     * contains the attributes of a &lt;code&gt;Struct&lt;/code&gt; object.
     */
    @SuppressWarnings(&quot;rawtypes&quot;)
    private Vector attribs;

    /**
     * The type map the driver supplies to a newly created
     * &lt;code&gt;SQLOutputImpl&lt;/code&gt; object.  This type map
     * indicates the &lt;code&gt;SQLData&lt;/code&gt; class whose
     * &lt;code&gt;writeSQL&lt;/code&gt; method will be called.  This
     * method will in turn call the appropriate
     * &lt;code&gt;SQLOutputImpl&lt;/code&gt; writer methods.
     */
    @SuppressWarnings(&quot;rawtypes&quot;)
    private Map map;

    /**
     * Creates a new &lt;code&gt;SQLOutputImpl&lt;/code&gt; object
     * initialized with the given vector of attributes and
     * type map.  The driver will use the type map to determine
     * which &lt;code&gt;SQLData.writeSQL&lt;/code&gt; method to invoke.
     * This method will then call the appropriate
     * &lt;code&gt;SQLOutputImpl&lt;/code&gt; writer methods in order and
     * thereby write the attributes to the new output stream.
     *
     * @param attributes a &lt;code&gt;Vector&lt;/code&gt; object containing the attributes of
     *        the UDT to be mapped to one or more objects in the Java
     *        programming language
     *
     * @param map a &lt;code&gt;java.util.Map&lt;/code&gt; object containing zero or
     *        more entries, with each entry consisting of 1) a &lt;code&gt;String&lt;/code&gt;
     *        giving the fully qualified name of a UDT and 2) the
     *        &lt;code&gt;Class&lt;/code&gt; object for the &lt;code&gt;SQLData&lt;/code&gt; implementation
     *        that defines how the UDT is to be mapped
     * @throws SQLException if the &lt;code&gt;attributes&lt;/code&gt; or the &lt;code&gt;map&lt;/code&gt;
     *        is a &lt;code&gt;null&lt;/code&gt; value
     */
    public SQLOutputImpl(Vector&lt;?&gt; attributes, Map&lt;String,?&gt; map)
        throws SQLException
    {
        if ((attributes == null) || (map == null)) {
            throw new SQLException(&quot;Cannot instantiate a SQLOutputImpl &quot; +
            &quot;instance with null parameters&quot;);
        }
        this.attribs = attributes;
        this.map = map;
    }

    //================================================================
    // Methods for writing attributes to the stream of SQL data.
    // These methods correspond to the column-accessor methods of
    // java.sql.ResultSet.
    //================================================================

    /**
     * Writes a &lt;code&gt;String&lt;/code&gt; in the Java programming language
     * to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;CHAR&lt;/code&gt;, &lt;code&gt;VARCHAR&lt;/code&gt;, or
     * &lt;code&gt;LONGVARCHAR&lt;/code&gt; before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeString(String x) throws SQLException {
        //System.out.println(&quot;Adding :&quot;+x);
        attribs.add(x);
    }

    /**
     * Writes a &lt;code&gt;boolean&lt;/code&gt; in the Java programming language
     * to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;BIT&lt;/code&gt; before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeBoolean(boolean x) throws SQLException {
        attribs.add(Boolean.valueOf(x));
    }

    /**
     * Writes a &lt;code&gt;byte&lt;/code&gt; in the Java programming language
     * to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;BIT&lt;/code&gt; before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeByte(byte x) throws SQLException {
        attribs.add(Byte.valueOf(x));
    }

    /**
     * Writes a &lt;code&gt;short&lt;/code&gt; in the Java programming language
     * to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;SMALLINT&lt;/code&gt; before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeShort(short x) throws SQLException {
        attribs.add(Short.valueOf(x));
    }

    /**
     * Writes an &lt;code&gt;int&lt;/code&gt; in the Java programming language
     * to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;INTEGER&lt;/code&gt; before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeInt(int x) throws SQLException {
        attribs.add(Integer.valueOf(x));
    }

    /**
     * Writes a &lt;code&gt;long&lt;/code&gt; in the Java programming language
     * to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;BIGINT&lt;/code&gt; before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeLong(long x) throws SQLException {
        attribs.add(Long.valueOf(x));
    }

    /**
     * Writes a &lt;code&gt;float&lt;/code&gt; in the Java programming language
     * to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;REAL&lt;/code&gt; before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeFloat(float x) throws SQLException {
        attribs.add(Float.valueOf(x));
    }

    /**
     * Writes a &lt;code&gt;double&lt;/code&gt; in the Java programming language
     * to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;DOUBLE&lt;/code&gt; before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeDouble(double x) throws SQLException{
        attribs.add(Double.valueOf(x));
    }

    /**
     * Writes a &lt;code&gt;java.math.BigDecimal&lt;/code&gt; object in the Java programming
     * language to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;NUMERIC&lt;/code&gt; before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeBigDecimal(java.math.BigDecimal x) throws SQLException{
        attribs.add(x);
    }

    /**
     * Writes an array of &lt;code&gt;bytes&lt;/code&gt; in the Java programming language
     * to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;VARBINARY&lt;/code&gt; or &lt;code&gt;LONGVARBINARY&lt;/code&gt;
     * before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeBytes(byte[] x) throws SQLException {
        attribs.add(x);
    }

    /**
     * Writes a &lt;code&gt;java.sql.Date&lt;/code&gt; object in the Java programming
     * language to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;DATE&lt;/code&gt; before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeDate(java.sql.Date x) throws SQLException {
        attribs.add(x);
    }

    /**
     * Writes a &lt;code&gt;java.sql.Time&lt;/code&gt; object in the Java programming
     * language to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;TIME&lt;/code&gt; before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeTime(java.sql.Time x) throws SQLException {
        attribs.add(x);
    }

    /**
     * Writes a &lt;code&gt;java.sql.Timestamp&lt;/code&gt; object in the Java programming
     * language to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver converts
     * it to an SQL &lt;code&gt;TIMESTAMP&lt;/code&gt; before returning it to the database.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeTimestamp(java.sql.Timestamp x) throws SQLException {
        attribs.add(x);
    }

    /**
     * Writes a stream of Unicode characters to this
     * &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver will do any necessary
     * conversion from Unicode to the database &lt;code&gt;CHAR&lt;/code&gt; format.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeCharacterStream(java.io.Reader x) throws SQLException {
         BufferedReader bufReader = new BufferedReader(x);
         try {
             int i;
             while( (i = bufReader.read()) != -1 ) {
                char ch = (char)i;
                StringBuffer strBuf = new StringBuffer();
                strBuf.append(ch);

                String str = new String(strBuf);
                String strLine = bufReader.readLine();

                writeString(str.concat(strLine));
             }
         } catch(IOException ioe) {

         }
    }

    /**
     * Writes a stream of ASCII characters to this
     * &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The driver will do any necessary
     * conversion from ASCII to the database &lt;code&gt;CHAR&lt;/code&gt; format.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeAsciiStream(java.io.InputStream x) throws SQLException {
         BufferedReader bufReader = new BufferedReader(new InputStreamReader(x));
         try {
               int i;
               while( (i=bufReader.read()) != -1 ) {
                char ch = (char)i;

                StringBuffer strBuf = new StringBuffer();
                strBuf.append(ch);

                String str = new String(strBuf);
                String strLine = bufReader.readLine();

                writeString(str.concat(strLine));
            }
          }catch(IOException ioe) {
            throw new SQLException(ioe.getMessage());
        }
    }

    /**
     * Writes a stream of uninterpreted bytes to this &lt;code&gt;SQLOutputImpl&lt;/code&gt;
     * object.
     *
     * @param x the value to pass to the database
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeBinaryStream(java.io.InputStream x) throws SQLException {
         BufferedReader bufReader = new BufferedReader(new InputStreamReader(x));
         try {
               int i;
             while( (i=bufReader.read()) != -1 ) {
                char ch = (char)i;

                StringBuffer strBuf = new StringBuffer();
                strBuf.append(ch);

                String str = new String(strBuf);
                String strLine = bufReader.readLine();

                writeString(str.concat(strLine));
             }
        } catch(IOException ioe) {
            throw new SQLException(ioe.getMessage());
        }
    }

    //================================================================
    // Methods for writing items of SQL user-defined types to the stream.
    // These methods pass objects to the database as values of SQL
    // Structured Types, Distinct Types, Constructed Types, and Locator
    // Types.  They decompose the Java object(s) and write leaf data
    // items using the methods above.
    //================================================================

    /**
     * Writes to the stream the data contained in the given
     * &lt;code&gt;SQLData&lt;/code&gt; object.
     * When the &lt;code&gt;SQLData&lt;/code&gt; object is &lt;code&gt;null&lt;/code&gt;, this
     * method writes an SQL &lt;code&gt;NULL&lt;/code&gt; to the stream.
     * Otherwise, it calls the &lt;code&gt;SQLData.writeSQL&lt;/code&gt;
     * method of the given object, which
     * writes the object's attributes to the stream.
     * &lt;P&gt;
     * The implementation of the method &lt;code&gt;SQLData.writeSQ&lt;/code&gt;
     * calls the appropriate &lt;code&gt;SQLOutputImpl.writeXXX&lt;/code&gt; method(s)
     * for writing each of the object's attributes in order.
     * The attributes must be read from an &lt;code&gt;SQLInput&lt;/code&gt;
     * input stream and written to an &lt;code&gt;SQLOutputImpl&lt;/code&gt;
     * output stream in the same order in which they were
     * listed in the SQL definition of the user-defined type.
     *
     * @param x the object representing data of an SQL structured or
     *          distinct type
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeObject(SQLData x) throws SQLException {

        /*
         * Except for the types that are passed as objects
         * this seems to be the only way for an object to
         * get a null value for a field in a structure.
         *
         * Note: this means that the class defining SQLData
         * will need to track if a field is SQL null for itself
         */
        if (x == null) {
            attribs.add(null);
        } else {
            /*
             * We have to write out a SerialStruct that contains
             * the name of this class otherwise we don't know
             * what to re-instantiate during readSQL()
             */
            attribs.add(new SerialStruct(x, map));
        }
    }

    /**
     * Writes a &lt;code&gt;Ref&lt;/code&gt; object in the Java programming language
     * to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object.  The driver converts
     * it to a serializable &lt;code&gt;SerialRef&lt;/code&gt; SQL &lt;code&gt;REF&lt;/code&gt; value
     * before returning it to the database.
     *
     * @param x an object representing an SQL &lt;code&gt;REF&lt;/code&gt; value
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeRef(Ref x) throws SQLException {
        if (x == null) {
            attribs.add(null);
        } else {
            attribs.add(new SerialRef(x));
        }
    }

    /**
     * Writes a &lt;code&gt;Blob&lt;/code&gt; object in the Java programming language
     * to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object.  The driver converts
     * it to a serializable &lt;code&gt;SerialBlob&lt;/code&gt; SQL &lt;code&gt;BLOB&lt;/code&gt; value
     * before returning it to the database.
     *
     * @param x an object representing an SQL &lt;code&gt;BLOB&lt;/code&gt; value
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeBlob(Blob x) throws SQLException {
        if (x == null) {
            attribs.add(null);
        } else {
            attribs.add(new SerialBlob(x));
        }
    }

    /**
     * Writes a &lt;code&gt;Clob&lt;/code&gt; object in the Java programming language
     * to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object.  The driver converts
     * it to a serializable &lt;code&gt;SerialClob&lt;/code&gt; SQL &lt;code&gt;CLOB&lt;/code&gt; value
     * before returning it to the database.
     *
     * @param x an object representing an SQL &lt;code&gt;CLOB&lt;/code&gt; value
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeClob(Clob x) throws SQLException {
        if (x == null) {
            attribs.add(null);
        } else {
            attribs.add(new SerialClob(x));
        }
    }

    /**
     * Writes a &lt;code&gt;Struct&lt;/code&gt; object in the Java
     * programming language to this &lt;code&gt;SQLOutputImpl&lt;/code&gt;
     * object. The driver converts this value to an SQL structured type
     * before returning it to the database.
     * &lt;P&gt;
     * This method should be used when an SQL structured type has been
     * mapped to a &lt;code&gt;Struct&lt;/code&gt; object in the Java programming
     * language (the standard mapping).  The method
     * &lt;code&gt;writeObject&lt;/code&gt; should be used if an SQL structured type
     * has been custom mapped to a class in the Java programming language.
     *
     * @param x an object representing the attributes of an SQL structured type
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeStruct(Struct x) throws SQLException {
        SerialStruct s = new SerialStruct(x,map);;
        attribs.add(s);
    }

    /**
     * Writes an &lt;code&gt;Array&lt;/code&gt; object in the Java
     * programming language to this &lt;code&gt;SQLOutputImpl&lt;/code&gt;
     * object. The driver converts this value to a serializable
     * &lt;code&gt;SerialArray&lt;/code&gt; SQL &lt;code&gt;ARRAY&lt;/code&gt;
     * value before returning it to the database.
     *
     * @param x an object representing an SQL &lt;code&gt;ARRAY&lt;/code&gt; value
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeArray(Array x) throws SQLException {
        if (x == null) {
            attribs.add(null);
        } else {
            attribs.add(new SerialArray(x, map));
        }
    }

    /**
     * Writes an &lt;code&gt;java.sql.Type.DATALINK&lt;/code&gt; object in the Java
     * programming language to this &lt;code&gt;SQLOutputImpl&lt;/code&gt; object. The
     * driver converts this value to a serializable &lt;code&gt;SerialDatalink&lt;/code&gt;
     * SQL &lt;code&gt;DATALINK&lt;/code&gt; value before return it to the database.
     *
     * @param url an object representing a SQL &lt;code&gt;DATALINK&lt;/code&gt; value
     * @throws SQLException if the &lt;code&gt;SQLOutputImpl&lt;/code&gt; object is in
     *        use by a &lt;code&gt;SQLData&lt;/code&gt; object attempting to write the attribute
     *        values of a UDT to the database.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    public void writeURL(java.net.URL url) throws SQLException {
        if (url == null) {
            attribs.add(null);
        } else {
            attribs.add(new SerialDatalink(url));
        }
    }


  /**
   * Writes the next attribute to the stream as a &lt;code&gt;String&lt;/code&gt;
   * in the Java programming language. The driver converts this to a
   * SQL &lt;code&gt;NCHAR&lt;/code&gt; or
   * &lt;code&gt;NVARCHAR&lt;/code&gt; or &lt;code&gt;LONGNVARCHAR&lt;/code&gt; value
   * (depending on the argument's
   * size relative to the driver's limits on &lt;code&gt;NVARCHAR&lt;/code&gt; values)
   * when it sends it to the stream.
   *
   * @param x the value to pass to the database
   * @exception SQLException if a database access error occurs
   * @since 1.6
   */
   @SuppressWarnings(&quot;unchecked&quot;)
   public void writeNString(String x) throws SQLException {
       attribs.add(x);
   }

  /**
   * Writes an SQL &lt;code&gt;NCLOB&lt;/code&gt; value to the stream.
   *
   * @param x a &lt;code&gt;NClob&lt;/code&gt; object representing data of an SQL
   * &lt;code&gt;NCLOB&lt;/code&gt; value
   *
   * @exception SQLException if a database access error occurs
   * @since 1.6
   */
   @SuppressWarnings(&quot;unchecked&quot;)
   public void writeNClob(NClob x) throws SQLException {
           attribs.add(x);
   }


  /**
   * Writes an SQL &lt;code&gt;ROWID&lt;/code&gt; value to the stream.
   *
   * @param x a &lt;code&gt;RowId&lt;/code&gt; object representing data of an SQL
   * &lt;code&gt;ROWID&lt;/code&gt; value
   *
   * @exception SQLException if a database access error occurs
   * @since 1.6
   */
   @SuppressWarnings(&quot;unchecked&quot;)
   public void writeRowId(RowId x) throws SQLException {
        attribs.add(x);
   }


  /**
   * Writes an SQL &lt;code&gt;XML&lt;/code&gt; value to the stream.
   *
   * @param x a &lt;code&gt;SQLXML&lt;/code&gt; object representing data of an SQL
   * &lt;code&gt;XML&lt;/code&gt; value
   *
   * @exception SQLException if a database access error occurs
   * @since 1.6
   */
   @SuppressWarnings(&quot;unchecked&quot;)
   public void writeSQLXML(SQLXML x) throws SQLException {
        attribs.add(x);
    }

}
</pre>
</body>
</html>
